<div class="login-container">
  <div class="login-overlay"></div>
  <div class="login-form">
    <h2 class="login-title">
      {{ isForgotPasswordMode ? 'Reset Password' : (isLoginMode ? 'NGO Login' : 'NGO Registration') }}
    </h2>

    <form (ngSubmit)="onSubmit()">

      <!-- Login / Register -->
      <ng-container *ngIf="!isForgotPasswordMode">

        <!-- Login -->
        <ng-container *ngIf="isLoginMode">
          <div class="mat-form-field">
            <input type="email" [(ngModel)]="loginData.email" name="loginEmail" placeholder="Email" />
            <small class="error">{{ fieldErrors.loginEmail }}</small>
          </div>
          <div class="mat-form-field">
            <input type="password" [(ngModel)]="loginData.password" name="loginPassword" placeholder="Password" />
            <small class="error">{{ fieldErrors.loginPassword }}</small>
          </div>
        </ng-container>

        <!-- Register -->
        <ng-container *ngIf="!isLoginMode">
          <div class="mat-form-field">
            <input type="text" [(ngModel)]="registerData.name" name="name" placeholder="NGO Name" />
            <small class="error">{{ fieldErrors.name }}</small>
          </div>
          <div class="mat-form-field">
            <input type="text" [(ngModel)]="registerData.registrationNumber" name="registrationNumber" placeholder="Registration Number" />
            <small class="error">{{ fieldErrors.registrationNumber }}</small>
          </div>
          <div class="mat-form-field">
            <input type="email" [(ngModel)]="registerData.email" name="email" placeholder="Email" />
            <small class="error">{{ fieldErrors.email }}</small>
          </div>
          <div class="mat-form-field">
            <input type="password" [(ngModel)]="registerData.password" name="password" placeholder="Password" />
            <small class="error">{{ fieldErrors.password }}</small>
          </div>
          <div class="mat-form-field">
            <input type="text" [(ngModel)]="registerData.contactNumber" name="contactNumber" placeholder="Contact Number" />
            <small class="error">{{ fieldErrors.contactNumber }}</small>
          </div>
          <div class="mat-form-field">
            <input type="text" [(ngModel)]="registerData.address" name="address" placeholder="Address" />
            <small class="error">{{ fieldErrors.address }}</small>
          </div>
          <div class="mat-form-field">
            <input type="text" [(ngModel)]="registerData.city" name="city" placeholder="City" />
            <small class="error">{{ fieldErrors.city }}</small>
          </div>
          <div class="mat-form-field">
            <input type="text" [(ngModel)]="registerData.state" name="state" placeholder="State" />
            <small class="error">{{ fieldErrors.state }}</small>
          </div>
          <div class="mat-form-field">
            <input type="text" [(ngModel)]="registerData.country" name="country" placeholder="Country" />
            <small class="error">{{ fieldErrors.country }}</small>
          </div>
          <div class="mat-form-field">
            <input type="text" [(ngModel)]="registerData.website" name="website" placeholder="Website" />
          </div>
          <div class="mat-form-field">
            <input type="text" [(ngModel)]="registerData.typeOfWork" name="typeOfWork" placeholder="Type of Work" />
            <small class="error">{{ fieldErrors.typeOfWork }}</small>
          </div>
          <div class="mat-form-field">
            <input type="text" [(ngModel)]="registerData.founderName" name="founderName" placeholder="Founder's Name" />
            <small class="error">{{ fieldErrors.founderName }}</small>
          </div>
          <div class="mat-form-field">
            <input type="text" [(ngModel)]="registerData.yearOfEstablishment" name="yearOfEstablishment" placeholder="Year of Establishment" />
            <small class="error">{{ fieldErrors.yearOfEstablishment }}</small>
          </div>
        </ng-container>

        <div class="mat-form-field">
          <button type="submit" class="login-btn">{{ isLoginMode ? 'Login' : 'Register' }}</button>
        </div>

        <div class="login-footer">
          <button type="button" class="login-btn" (click)="toggleMode()">Switch to {{ isLoginMode ? 'Register' : 'Login' }}</button>
          <button type="button" class="login-btn" (click)="showForgotPassword()">Forgot Password?</button>
        </div>

      </ng-container>

      <!-- Forgot Password -->
      <ng-container *ngIf="isForgotPasswordMode">
        <div class="mat-form-field">
          <input type="email" [(ngModel)]="forgotEmail" name="forgotEmail" placeholder="Enter your registered email" />
          <small class="error">{{ fieldErrors.forgotEmail }}</small>
        </div>
        <div class="mat-form-field" *ngIf="emailVerified">
          <input type="password" [(ngModel)]="newPassword" name="newPassword" placeholder="Enter new password" />
          <small class="error">{{ fieldErrors.newPassword }}</small>
        </div>

        <div class="mat-form-field">
          <button type="button" class="login-btn" (click)="handleForgotPassword()">
            {{ emailVerified ? 'Update Password' : 'Verify Email' }}
          </button>
        </div>

        <div class="login-footer">
          <button type="button" class="login-btn" (click)="cancelForgotPassword()">Back to {{ isLoginMode ? 'Login' : 'Register' }}</button>
        </div>
      </ng-container>

    </form>
  </div>
</div>
